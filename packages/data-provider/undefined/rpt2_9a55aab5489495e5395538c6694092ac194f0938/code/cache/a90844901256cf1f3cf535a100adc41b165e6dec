{"code":"import { __assign } from \"tslib\";\nimport { tConvoUpdateSchema, EModelEndpoint } from './schemas';\nimport { EndpointURLs } from './config';\nexport default function createPayload(submission) {\n    var conversation = submission.conversation, message = submission.message, messages = submission.messages, endpointOption = submission.endpointOption, isEdited = submission.isEdited, isContinued = submission.isContinued;\n    var conversationId = tConvoUpdateSchema.parse(conversation).conversationId;\n    var _a = endpointOption, endpoint = _a.endpoint, endpointType = _a.endpointType;\n    var server = EndpointURLs[endpointType !== null && endpointType !== void 0 ? endpointType : endpoint];\n    if (isEdited && endpoint === EModelEndpoint.assistants) {\n        server += '/modify';\n    }\n    else if (isEdited) {\n        server = server.replace('/ask/', '/edit/');\n    }\n    var payload = __assign(__assign(__assign({}, message), endpointOption), { isContinued: !!(isEdited && isContinued), conversationId: conversationId });\n    return { server: server, payload: payload };\n}\n//# sourceMappingURL=createPayload.js.map","references":["/home/lau/dev-projects/Chocolatine/packages/data-provider/src/types.ts","/home/lau/dev-projects/Chocolatine/packages/data-provider/src/schemas.ts","/home/lau/dev-projects/Chocolatine/packages/data-provider/src/config.ts"],"map":"{\"version\":3,\"file\":\"createPayload.js\",\"sourceRoot\":\"\",\"sources\":[\"../../src/createPayload.ts\"],\"names\":[],\"mappings\":\";AACA,OAAO,EAAE,kBAAkB,EAAE,cAAc,EAAE,MAAM,WAAW,CAAC;AAC/D,OAAO,EAAE,YAAY,EAAE,MAAM,UAAU,CAAC;AAExC,MAAM,CAAC,OAAO,UAAU,aAAa,CAAC,UAAuB;IACnD,IAAA,YAAY,GAA+D,UAAU,aAAzE,EAAE,OAAO,GAAsD,UAAU,QAAhE,EAAE,QAAQ,GAA4C,UAAU,SAAtD,EAAE,cAAc,GAA4B,UAAU,eAAtC,EAAE,QAAQ,GAAkB,UAAU,SAA5B,EAAE,WAAW,GAAK,UAAU,YAAf,CAAgB;IACtF,IAAA,cAAc,GAAK,kBAAkB,CAAC,KAAK,CAAC,YAAY,CAAC,eAA3C,CAA4C;IAC5D,IAAA,KAA6B,cAGlC,EAHO,QAAQ,cAAA,EAAE,YAAY,kBAG7B,CAAC;IAEF,IAAI,MAAM,GAAG,YAAY,CAAC,YAAY,aAAZ,YAAY,cAAZ,YAAY,GAAI,QAAQ,CAAC,CAAC;IAEpD,IAAI,QAAQ,IAAI,QAAQ,KAAK,cAAc,CAAC,UAAU,EAAE,CAAC;QACvD,MAAM,IAAI,SAAS,CAAC;IACtB,CAAC;SAAM,IAAI,QAAQ,EAAE,CAAC;QACpB,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;IAC7C,CAAC;IASD,IAAM,OAAO,kCACR,OAAO,GACP,cAAc,KACjB,WAAW,EAAE,CAAC,CAAC,CAAC,QAAQ,IAAI,WAAW,CAAC,EACxC,cAAc,gBAAA,GACf,CAAC;IAEF,OAAO,EAAE,MAAM,QAAA,EAAE,OAAO,SAAA,EAAE,CAAC;AAC7B,CAAC\"}","dts":{"name":"/home/lau/dev-projects/Chocolatine/packages/data-provider/dist/types/createPayload.d.ts","writeByteOrderMark":false,"text":"import type { TSubmission, TMessage, TEndpointOption } from './types';\nexport default function createPayload(submission: TSubmission): {\n    server: string;\n    payload: Partial<TMessage> & Partial<TEndpointOption> & {\n        isContinued: boolean;\n        conversationId: string | null;\n        messages?: TMessage[] | undefined;\n    };\n};\n"}}
